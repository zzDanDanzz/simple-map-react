# توضیحات نمونه کد simple-react-map.zip

برای اجرای کد اول npm install و سپس npm run dev را اجرا کنید.

فایل‌های اصلی که توجه نیاز دارند فایل‌های SimpleMap.tsx و utils.ts هستند.

کتابخانه اصلی که رسم کردن نقشه را به عهده می‌گیرد، کتابخانه maplibre-gl است. این کتابخانه یک فورک Open source از آخرین نسخه ورژن 1 mapbox-gl هستش. به دلیل اینکه از ورژن 2 به بعد mapbox-gl بدون کلید دسترسی که از شرکت mapbox دریافت می‌شود قابل استفاده نیست. به همین دلیل ما از maplibre-gl استفاده می‌کنیم.

در SimpleMap.tsx یک کامپوننت با نام Map در jsx کال شده. توجه داشته باشید که این کامپوننت از آدرس react-map-gl/maplibre ایمپورت شده است (و نه از react-map-gl بدون maplibre)

کتابخانه react-map-gl یک wrapper برای کتابخانه(های) mapbox/maplibre جهت استفاده آسان‌تر در react هستش. استفاده مستقیم maplibre هم امکان‌پذیر است اما برای ری‌اکت react-map-gl توصیه می‌شود.

قسمت مربوط به map.ir پراپ های mapStyle و transformRequest هستند.

در mapStyle نیاز است آدرس سرویس کاشی نقشه پایه و استایلی که به دیتای کاشی نقشه پایه (در صورتی که نوع کاشی وکتور باشد،) می‌دهیم را تعریف کنیم. در کد تمامی آپشن‌های کاشی نقشه وکتوری و رستری map.ir در فایل utils قرار داده شده.

پراپ transformRequest برای ایجاد تغییرات در url یا header درخواست‌هایی که کتابخانه maplibre به سرویس کاشی نقشه می‌زنددمی‌باشد (که در این نمونه کد سرویس map.ir هستش). با استفاده از این پراپ کلید دسترسی map.ir را در header درخواست‌ها با نام x-api-key قرار می‌دهیم. این کلید دسترسی از سایت accounts.map.ir قابل دریافت هستش.
